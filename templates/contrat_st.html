<div class="article">

    <div class="ui attached message">
        <div class="header"> Fiche de suivi de contrats Sous-Traitance </div>
        <p>{{sc.type}}</p>
        <div class="ui top right attached label">
            <div class="ui small horizontal statistic">
                <div class="label">
                    N&deg; Contrat &nbsp;&nbsp;&nbsp;
                </div>
                <div class="value">
                    {{ sc.n_c }}
                </div>
            </div>
        </div>
    </div>

    <form class="ui form attached fluid segment" name="form" ng-model="sc" ng-submit="form.$valid && submit()" >

        <div class="print_ignore">
            <div class="ui mini steps">
                <div class="link step" onclick="window.history.back()" >
                    <i class="chevron left icon"></i>
                    <div class="content">
                        <div class="title">PRECEDENTE</div>
                        <div class="description">retourner à la page précédente</div>
                    </div>
                </div>
                <div class="step">
                    <i class="edit icon"></i>
                    <div class="content">
                        <div class="title">PASSATION</div>
                        <div class="description">Préparer le contrat</div>
                    </div>
                </div>
                <div class="step">
                    <i class="settings icon"></i>
                    <div class="content">
                        <div class="title">EXECUTION</div>
                        <div class="description">Passer en mode execution</div>
                    </div>
                </div>
            </div>
            <p>&nbsp;</p>
        </div>

        <input type="hidden" ng-model="sc.id">
        <input type="hidden" ng-model="sc.type">

        <div class="equal width fields">
            <!--div class="field">
                <label>Type de contrats <i class="red asterisk icon"></i></label>
                <select class="ui " id="sc_type" ng-model="sc.type">
                    <option value="" selected hidden></option>
                    <option value="Batiment">Batiment</option>
                    <option value="Genie Civile">Genie Civile</option>
                </select>
            </div-->

            <div class="field">
                <label>Responsable de la structure bénéficiaire <i class="red asterisk icon"></i></label>
                <select id="sc_dir" ng-model="sc.dir" class="ui upper">
                    <option value="" selected hidden></option>
                    <option ng-repeat="ele in $parent.userList | filter:{rule:'directeur'}" value="{{ele.username}}">{{ele.username}}</option>
                </select>
            </div>

            <div class="field">
                <label>Pole <i class="red asterisk icon"></i></label>
                <select id="sc_pole" ng-model="sc.pole" class="ui upper">
                    <option value="" selected hidden></option>
                    <option ng-repeat="ele in $parent.userList | filter:{rule:'chantier'}" value="{{ele.username}}">{{ele.username}}</option>
                </select>
            </div>

        </div>
        <div class="field">
            <label>Intitulé du projet :<i class="red asterisk icon"></i></label>
            <input type="text" placeholder="Intitulé du projet" maxlength="512" ng-model="sc.int_prj">
        </div>


        <p>
            <div class="ui red ribbon label">
                <i class="edit icon"></i> PASSATION
            </div>
        </p>

        <div class="fields">
            <div class="four wide field">
                <label>Nature de l'opération</label>
                <input type="text" placeholder="Nature de l'opération" maxlength="50" ng-model="sc.nat_op">
            </div>

            <div class="twelve wide field">
                <label>Objet de l'opération</label>
                <input type="text" placeholder="Objet de l'opération" maxlength="512" ng-model="sc.obj_op">
            </div>
        </div>

        <div class="equal width fields">
            <div class="six wide field">
                <label>Mode de passation</label>
                <input type="text" placeholder="Mode de passation" maxlength="50" ng-model="sc.md_pass">
            </div>
        </div>

        <div class="equal width fields">
          <div class="field">
              <label>Lancement de  l'appel d'offres/consultation</label>
              <input type="date" placeholder="JJ/MM/AAAA" maxlength="10" ng-model="sc.date_af">
          </div>

          <div class="field">
              <label>Ouverture des plis</label>
              <input type="date" placeholder="JJ/MM/AAAA" maxlength="10" ng-model="sc.date_ovp">
          </div>

          <div class="field">
              <label>Evaluation des offres</label>
              <input type="date" placeholder="JJ/MM/AAAA" maxlength="10" ng-model="sc.date_eof">
          </div>

          <div class="field">
              <label>Délai de réalisation</label>
              <input type="text" placeholder="Mois / Jours" maxlength="10" ng-model="sc.d_rl">
          </div>

        </div>

        <div class="equal width fields">
          <div class="field">
              <label>Montant contractuel/TTC</label>
              <div class="ui right labeled input">
                  <input type="number" placeholder="xxxx,xx DA" string-to-number  ng-model="sc.mnt" min="0.00" maxlength="11" step="0.01">
                  <div class="ui label">
                      DA
                  </div>
              </div>
          </div>

        </div>


        <p>
            <div class="ui red ribbon label">
                <i class="settings icon"></i> EXECUTION
            </div>
        </p>

        <div class="field">
            <label>N° contrat</label>
            <input type="text" placeholder="N° contrat" maxlength="256" ng-model="sc.n_c">
        </div>

        <div class="field">
            <label>Cocontractant</label>
            <input type="text" placeholder="Cocontractant" maxlength="256" ng-model="sc.cocont">
        </div>

        <div class="field">
            <label>ADRESSE</label>
            <input type="text" placeholder="ADRESSE" maxlength="256" ng-model="sc.adr">
        </div>

        <div class="field">
            <label>N° NIF</label>
            <input type="text" placeholder="N° NIF" maxlength="256" ng-model="sc.n_nif">
        </div>

        <div class="field">
            <label>N° ARTICLE D'IMPOSITION</label>
            <input type="text" placeholder="N° ARTICLE D'IMPOSITION" maxlength="256" ng-model="sc.n_art">
        </div>

        <div class="field">
            <label>Date d'enregistrement</label>
            <input type="date" placeholder="JJ/MM/AAAA" maxlength="10" ng-model="sc.date_enr">
        </div>

        <div class="ui field right aligned print_ignore">
            <button class="ui button " ng-class="{'loading': save==1}">Enregistrer</button>
        </div>

    </form>

    <div class="ui bottom mini attached message print_ignore" ng-class="{'hidden': !msg , 'red': msg[0]=='error', 'teal':msg[0]=='done!'}">
        <i class="close icon"></i>
        <div class="header">{{msg[1]}}</div>
        <ul class="list">
            <li ng-repeat="value in msg[2]">{{value}}</li>
        </ul>
    </div>

</div>
